{{define "component.need.card"}}
<article class="bg-card text-card-foreground flex h-full flex-col gap-6 rounded-xl border py-6 shadow-sm">
  <header class="space-y-4 px-6">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-lg font-semibold text-foreground">{{derefOr .ShortDescription "Community need"}}</p>
        <p class="text-sm text-muted-foreground">{{derefOr .City "Charlotte"}}{{if .State}} â€¢ {{.State}}{{end}}</p>
      </div>
      <div class="text-xs font-medium uppercase text-muted-foreground">{{.Status}}</div>
    </div>
  </header>

  <div class="flex-1 space-y-4 px-6">
    <p class="text-sm text-muted-foreground">{{derefOr .ShortDescription "Support this neighbor by learning more and contributing if you can."}}</p>

    <div class="space-y-2">
      <div class="flex items-center justify-between text-xs text-muted-foreground">
        <span>${{div .AmountRaisedCents 100}} raised</span>
        <span>${{div .AmountNeededCents 100}} goal</span>
      </div>
      <div class="h-2 w-full rounded-full bg-muted">
        {{$percent := 0}}
        {{if gt .AmountNeededCents 0}}
        {{$percent = div (mul .AmountRaisedCents 100) .AmountNeededCents}}
        {{end}}
        {{if ge $percent 75}}
        <div class="h-2 rounded-full bg-[color:var(--cj-success)] transition-all" style="width: {{$percent}}%"></div>
        {{else if ge $percent 50}}
          <div class="h-2 rounded-full bg-[color:var(--cj-warning)] transition-all" style="width: {{$percent}}%"></div>
          {{else}}
            <div class="h-2 rounded-full bg-[color:var(--cj-error)] transition-all" style="width: {{$percent}}%"></div>
            {{end}}
      </div>
      <div class="text-xs font-medium text-muted-foreground">{{$percent}}% funded</div>
    </div>
  </div>

  <footer class="px-6">
    <a href="/need/{{.ID}}"
      class="inline-flex h-9 w-full items-center justify-center rounded-md bg-[color:var(--cj-primary)] px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-[color:var(--cj-primary)]/90">
      View Details
    </a>
  </footer>
</article>
{{end}}